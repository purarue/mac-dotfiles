#!/usr/bin/env python3

# Waits for input, give one or more links as input
# Opens link in default browser
# input 'q' or 'quit' to quit
#
# can also pipe like `echo http://somelink.com | openlinks`

import sys
import re
import webbrowser

# open anything given as a command line argument
links = re.findall(r'(https?://\S+)', " ".join(sys.argv).strip())
for link in links:
    webbrowser.open_new_tab(link)

# open anything piped/as input
while True:
    try:
        user_input = input()
        for line in user_input.split("\s*\n\s*"):
            if line.strip().lower() in ['q', 'quit']:
                sys.exit(1)
            webbrowser.open_new_tab(line)
    except (EOFError, KeyboardInterrupt):
        sys.exit(1)
